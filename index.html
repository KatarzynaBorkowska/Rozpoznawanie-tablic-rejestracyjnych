<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300&display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
        <title>Strona główna</title>
    </head>
    <body>

    <div class = "bg">
        <img src="{{ url_for('static', filename= 'car.png')}}" alt="uploaded image" class="bg__img" width="400" height="300">

    </div>
    <div class="szklo">

        <h1>Rozpoznawanie rejestracji ze zdjecia</h1>


        <main>

        </main>
    <div id = "left-section">
        <p1>
        <form action="/zdjecie_z_komputera" method="post" enctype="multipart/form-data">
            <label class="komputera">Tutaj możesz umieścić plik z komputera</label><br>
          <input type="file" name="file">
          <button type="submit" class="myButton">Wyślij</button>
        </form>
        </p1>
<br>

         <p2>

         </p2>
        <form action="/zdjecie_z_systemu" method="POST">
          <label for="mySelect" class="komputera">Wybierz samochód do odczytania z pliku:</label><br>
          <select name="samochod" id="mySelect">
              <option value="Puste pole">Puste pole</option>
              <option value="test1" data-image="{{ url_for('static', filename='test1.png') }}">Test 1</option>
              <option value="test2" data-image="{{ url_for('static', filename='test2.png') }}">Test 2</option>
              <option value="test3" data-image="{{ url_for('static', filename='test3.png') }}">Test 3</option>
              <option value="test4" data-image="{{ url_for('static', filename='test4.png') }}">Test 4</option>
              <option value="test5" data-image="{{ url_for('static', filename='test5.png') }}">Test 5</option>
              <option value="test6" data-image="{{ url_for('static', filename='test6.png') }}">Test 6</option>
              <option value="test7" data-image="{{ url_for('static', filename='test7.png') }}">Test 7</option>
              <option value="test8" data-image="{{ url_for('static', filename='test8.png') }}">Test 8</option>
          </select>

            <button type="submit" class="myButton2">Wyślij</button>
            </form>
         </p2>
    </div>
        </main>
    <div>
<script>
    var myButton = document.querySelector(".myButton");
    myButton.addEventListener("click", function(event){
        var fileInput = document.querySelector("input[type='file']");
        if(fileInput.files.length == 0){
            event.preventDefault();
            alert("Wybierz plik z komputera!");
        }
    });
</script>
<script>
    var myButton = document.querySelector(".myButton2");
    myButton.addEventListener("click", function(event){
        var select = document.getElementById("mySelect");
        var selectedOption = select.options[select.selectedIndex];
        if(selectedOption.value == "Puste pole"){
            event.preventDefault();
            alert("Wybierz samochód z listy!");
        }
    });
</script>
        <div id = "right-section">
    <script>
        // Pobierz element select
          var select = document.getElementById("mySelect");

          // Zdefiniuj funkcję, która będzie wywoływana po każdym zmianie wyboru
          select.onchange = function() {
            // Pobierz istniejący element obrazka
            const obrazek = document.getElementById('obrazek');

            // Jeśli element obrazka istnieje, usuń go ze strony
            if (obrazek) {
              obrazek.parentNode.removeChild(obrazek);
            }

            // Pobierz wybraną opcję
            var selectedOption = this.options[select.selectedIndex];

            // Pobierz atrybut data-image dla wybranej opcji
            var imageUrl = selectedOption.getAttribute("data-image");

            // Twórz element img z odpowiednim atrybutem src
            var img = document.createElement("img");
            img.src = imageUrl;
            img.id = "obrazek";

            // Umieść obraz na stronie
            if (selectedOption.value != "Puste pole") {
                // Twórz element img z odpowiednim atrybutem src
                var img = document.createElement("img");
                img.src = imageUrl;
                img.id = "obrazek";

                // Umieść obraz na stronie
                document.querySelector('.szklo').appendChild(img);
            }
          }
    </script>
            </div>
</div>
</div>
    </body>
</html>